function oAuthConfig(e){e.facebook({url:"/api/oauth/facebook",clientId:"349428735446661"}),e.twitter({url:"/api/oauth/twitter",clientId:"YjSOxNEdFNfHixvgyqpCcIzle"})}function Router(e,t){e.state("home",{url:"/",templateUrl:"templates/home.html",controller:"EventsController as events"}).state("login",{url:"/login",templateUrl:"templates/login.html",controller:"LoginController as login"}).state("register",{url:"/register",templateUrl:"templates/register.html",controller:"RegisterController as register"}).state("eventsIndex",{url:"/events",templateUrl:"templates/events/index.html",controller:"EventsController as events"}).state("createEvent",{url:"/events/new",templateUrl:"templates/events/create.html",controller:"CreateEventsController as createEvent"}).state("showEvent",{url:"/events/:id",templateUrl:"templates/events/show.html",controller:"ShowEventsController as showEvent"}).state("updateEvent",{url:"/events/:id/update",templateUrl:"templates/events/update.html",controller:"UpdateEventsController as updateEvent"}),t.otherwise("/")}function EventsController(e,t){var n=this;this.all=e.query(),this.new={},this.select=function(n){console.log(t.params),t.go("showEvent"),console.log(t.params),this.selected=e.get(t.params)},this.deselect=function(){this.selected=null},this.save=function(){e.save(n.new,function(){t.go("eventsIndex")})},this.update=function(){n.selected.$update(function(){t.go("showEvent",t.params)})},this.delete=function(e){e.$delete(function(){var r=n.all.indexOf(e);n.all.splice(r,1),n.selected=null,t.go("eventsIndex")})}}function LoginController(e,t,n){this.credentials={},this.submit=function(){n.login(this.credentials,{url:"/api/login"}).then(function(){t.$broadcast("loggedIn"),e.go("eventsIndex")})},this.authenticate=function(r){n.authenticate(r).then(function(){t.$broadcast("loggedIn"),e.go("eventsIndex")})}}function RegisterController(e,t){this.user={},this.submit=function(){$auth.signup(this.user,{url:"/api/register"}).then(function(){e.go("eventsIndex"),t.$broadcast("loggedIn")})}}function CurrentUserController(e,t,n,r){var o=this;this.currentUser=n.getPayload(),t.$on("loggedIn",function(){o.currentUser=n.getPayload()}),t.$on("unauthorized",function(){e.go("login"),o.errorMessage="Please log in."}),this.logout=function(){n.logout(),this.currentUser=null,e.go("home")}}function date(){return{restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$formatters.push(function(e){return new Date(e)})}}}function file(){return{restrict:"A",require:"ngModel",link:function(e,t,n,r){t.on("change",function(e){r.$setViewValue(e.target.files[0])})}}}function Event(e,t){return e("/api/events/:id",{id:"@_id"},{save:{method:"POST",headers:{"Content-Type":void 0},transformRequest:t.transform},update:{method:"PUT",headers:{"Content-Type":void 0},transformRequest:t.transform},update:{method:"PATCH",headers:{"Content-Type":void 0},transformRequest:t.transform}})}function User(e){return e("/api/users",{id:"@_id"},{update:{method:"PUT"},login:{method:"POST",url:"/api/login"},register:{method:"POST",url:"/api/register"}})}function formData(){return{transform:function(e){var t=new FormData;return angular.forEach(e,function(e,n){e._id&&(e=e._id),n.match(/^\$/)||t.append(n,e)}),t}}}function CreateEventsController(e,t){this.new={},this.save=function(){e.save(this.new,function(){t.go("eventsIndex")})}}function ShowEventsController(e,t){this.selected=e.get(t.params),this.delete=function(){this.selected.$delete(function(){t.go("eventsIndex")})}}function UpdateEventsController(e,t){this.selected=e.get(t.params),this.update=function(){this.selected.$update(function(){t.go("showEvent",t.params)})}}angular.module("LdnBeerApp",["ui.router","ui.bootstrap","ngResource","ngTouch","ngAnimate","angular-jwt","ngMessages","satellizer"]).config(oAuthConfig).config(Router),oAuthConfig.$inject=["$authProvider"],Router.$inject=["$stateProvider","$urlRouterProvider"],angular.module("LdnBeerApp").controller("EventsController",EventsController),EventsController.$inject=["Event","$state"],angular.module("LdnBeerApp").controller("LoginController",LoginController),LoginController.$inject=["$state","$rootScope","$auth"],angular.module("LdnBeerApp").controller("RegisterController",RegisterController),RegisterController.$inject=["$state","$rootScope"],angular.module("LdnBeerApp").controller("CurrentUserController",CurrentUserController),CurrentUserController.$inject=["$state","$rootScope","$auth","$window"],angular.module("LdnBeerApp").directive("date",date),angular.module("LdnBeerApp").directive("file",file),angular.module("LdnBeerApp").factory("Event",Event),Event.$inject=["$resource","formData"],angular.module("LdnBeerApp").factory("User",User),User.$inject=["$resource"],angular.module("LdnBeerApp").factory("formData",formData),angular.module("LdnBeerApp").controller("CreateEventsController",CreateEventsController),CreateEventsController.$inject=["Event","$state"],angular.module("LdnBeerApp").controller("ShowEventsController",ShowEventsController),ShowEventsController.$inject=["Event","$state"],angular.module("LdnBeerApp").controller("UpdateEventsController",UpdateEventsController),UpdateEventsController.$inject=["Event","$state"];